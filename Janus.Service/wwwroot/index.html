<html>
<head>
	<title>Jpeg Stream Client</title>
	<style type="text/css">
		html, body {
			background-color: #111;
			text-align: center;
		}
	</style>
	
</head>
<body>
	<canvas id="video-canvas"></canvas>
	<script type="text/javascript" src="jsmpeg.min.js"></script>
	<script type="text/javascript">
		fetch('./video')
			.then(response => {
				const reader = response.body.getReader();
				var frameHeaderReceived = false;
				var frameLengthBytes = 0;
				reader.read().then(function (result) {
					var array = result.value;
					
					if (!frameHeaderReceived) {
						frameLengthBytes = array[3] << 24 | array[2] << 16 | array[1] << 8 | array[0];

					}
					
					console.log(frameLengthBytes);
				});
			});
	</script>
</body>
</html>